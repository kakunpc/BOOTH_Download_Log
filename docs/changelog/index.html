---
layout: default
title: "更新履歴"
javascript: "https://cdn.jsdelivr.net/npm/marked/marked.min.js"
---
            <section id="changelog">
                <h2>更新履歴</h2>
                <div id="changelog-loading" class="changelog-status">
                    <div class="loading-spinner"></div>
                    <p>更新履歴を読み込み中...</p>
                </div>
                <div id="changelog-content" style="display: none;">
                </div>
                <div id="changelog-error" class="changelog-status" style="display: none;">
                    <p>更新履歴の読み込みに失敗しました。<a href="https://github.com/AssetConnect/AssetConnect/blob/main/CHANGELOG.md" target="_blank">GitHub で直接確認</a>してください。</p>
                </div>
            </section>

            <section id="release-notes">
                <h3>リリース情報</h3>
                <p>AssetConnectの最新リリース情報やダウンロードは<a href="https://github.com/AssetConnect/AssetConnect/releases" target="_blank">GitHub Releases</a>で確認できます。</p>
                <ul>
                    <li><strong>最新版のダウンロード:</strong> <a href="https://github.com/AssetConnect/AssetConnect/releases/latest" target="_blank">GitHub Releases</a></li>
                    <li><strong>バグ報告・機能リクエスト:</strong> <a href="https://github.com/AssetConnect/AssetConnect/issues" target="_blank">GitHub Issues</a></li>
                    <li><strong>ソースコード:</strong> <a href="https://github.com/AssetConnect/AssetConnect" target="_blank">GitHub Repository</a></li>
                </ul>
            </section>

<script>
async function loadChangelog() {
    const loadingDiv = document.getElementById('changelog-loading');
    const contentDiv = document.getElementById('changelog-content');
    const errorDiv = document.getElementById('changelog-error');
    
    try {
        const response = await fetch('https://raw.githubusercontent.com/AssetConnect/AssetConnect/main/CHANGELOG.md');
        if (!response.ok) {
            throw new Error('ファイルの読み込みに失敗しました');
        }
        
        const markdown = await response.text();
        const html = marked.parse(markdown);
        
        // 読み込み完了後の表示切り替え
        loadingDiv.style.display = 'none';
        contentDiv.innerHTML = html;
        contentDiv.style.display = 'block';
        
        // バージョン番号にアンカーを追加
        addVersionAnchors();
        
    } catch (error) {
        console.error('Error loading changelog:', error);
        loadingDiv.style.display = 'none';
        errorDiv.style.display = 'block';
    }
}

function addVersionAnchors() {
    const versionHeaders = document.querySelectorAll('#changelog-content h2');
    versionHeaders.forEach(header => {
        const version = header.textContent.match(/^\d+\.\d+\.\d+/);
        if (version) {
            header.id = `v${version[0]}`;
            // クリック可能なアンカーリンクを追加
            const anchor = document.createElement('a');
            anchor.href = `#v${version[0]}`;
            anchor.className = 'version-anchor';
            anchor.innerHTML = header.innerHTML;
            header.innerHTML = '';
            header.appendChild(anchor);
        }
    });
}

// リリース情報をGitHub APIから取得
async function loadReleaseInfo() {
    try {
        const response = await fetch('https://api.github.com/repos/AssetConnect/AssetConnect/releases');
        if (response.ok) {
            const releases = await response.json();
            const latestRelease = releases[0];
            if (latestRelease) {
                console.log('Latest release:', latestRelease.tag_name);
            }
        }
    } catch (error) {
        console.log('Could not fetch release info');
    }
}

document.addEventListener('DOMContentLoaded', () => {
    loadChangelog();
    loadReleaseInfo();
});
</script>